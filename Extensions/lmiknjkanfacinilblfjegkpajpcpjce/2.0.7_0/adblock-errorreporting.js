window.addEventListener("error",function(a){if(a.filename||a.lineno||a.colno||a.error||a.message){var b="Error: "+(a.filename||"anywhere").replace(chrome.extension.getURL(""),"")+":"+(a.lineno||"anywhere")+":"+(a.colno||"anycol");a.message&&(b+=": "+a.message);var c=a.target.src||a.target.href;if(c&&(b+="src: "+c),a.error){var d="-"+(a.error.message||"")+"-"+(a.error.stack||"");d=d.replace(/:/gi,";").replace(/\n/gi,""),-1===d.indexOf("http")&&(b+=d),1024<b.length&&(b=b.substr(0,1023))}STATS.msg(b),ext.storage.set("error","Date added:"+new Date+" "+b)}});