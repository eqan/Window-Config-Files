const{checkWhitelisted}=require("whitelisting");var updateButtonUIAndContextMenus=function(){ext.pages.query({},function(a){a.forEach(function(a){adblockIsPaused()&&a.browserAction.setBadge({number:""}),updateContextMenuItems(a)})})},updateContextMenuItems=function(a){a.contextMenus.remove(uBlockerContextMenuItemOne),a.contextMenus.remove(uBlockerContextMenuItemTwo),Prefs.shouldShowBlockElementMenu&&!checkWhitelisted(a)&&(a.contextMenus.create(uBlockerContextMenuItemOne),a.contextMenus.create(uBlockerContextMenuItemTwo))};ext.pages.onLoading.addListener(updateContextMenuItems),ext.onMessage.addListener(function(a,b){switch(a.type){case"report-html-page":updateContextMenuItems(b.page);}}),FilterNotifier.addListener(function(a){("load"==a||"save"==a)&&updateButtonUIAndContextMenus()}),Prefs.on(Prefs.shouldShowBlockElementMenu,function(){updateButtonUIAndContextMenus()}),updateButtonUIAndContextMenus();var uBlockerContextMenuItemOne={title:ext.i18n.getMessage("block_this_ad"),contexts:["all"],onclick:function(a,b){emitPageBroadcast({fn:"top_open_blacklist_ui",options:{info:b}},{tab:a})}},uBlockerContextMenuItemTwo={title:ext.i18n.getMessage("block_an_ad_on_this_page"),contexts:["all"],onclick:function(a){emitPageBroadcast({fn:"top_open_blacklist_ui",options:{nothing_clicked:!0}},{tab:a})}};if(!SAFARI)var emitPageBroadcast=function(){var a={top_open_whitelist_ui:{allFrames:!1,include:["punycode.min.js","adblock-jquery.min.js","adblock-jquery-ui.min.js","adblock-uiscripts-load_jquery_ui.js","adblock-uiscripts-top_open_whitelist_ui.js"]},top_open_blacklist_ui:{allFrames:!1,include:["punycode.min.js","adblock-jquery.min.js","adblock-jquery-ui.min.js","adblock-uiscripts-load_jquery_ui.js","adblock-uiscripts-blacklisting-overlay.js","adblock-uiscripts-blacklisting-clickwatcher.js","adblock-uiscripts-blacklisting-elementchain.js","adblock-uiscripts-blacklisting-blacklistui.js","adblock-uiscripts-top_open_blacklist_ui.js"]},send_content_to_back:{allFrames:!0,include:["adblock-uiscripts-send_content_to_back.js"]}},b=function(c,d,e){e=e||0;var f=a[c],g={allFrames:f.allFrames};if(f.include.length>e)g.file=f.include[e],chrome.tabs.executeScript(void 0,g,function(){return chrome.runtime.lastError?void log(chrome.runtime.lastError):void b(c,d,e+1)});else{var h=JSON.stringify(d);g.code=c+"("+h+");",chrome.tabs.executeScript(void 0,g)}};return function(a){b(a.fn,a.options)}}();