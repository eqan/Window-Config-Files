ExcludeFilter=function(){function a(d){if("save"===d){chrome.storage.local.get("exclude_filters",function(d){if(d.exclude_filters){for(var e,f=d.exclude_filters.split("\n"),g=0;g<f.length;g++)if(e=f[g],0<e.length){var h=parseFilter(e);h.filter&&c(h.filter)}}else b.removeListener(a)})}}var b=require("filterNotifier").FilterNotifier,c=function(a){for(var c=a.subscriptions.slice(),d=0;d<c.length;d++){var e=c[d],f=[],g=-1;do g=e.filters.indexOf(a,g+1),0<=g&&f.push(g);while(0<=g);for(var h,k=f.length-1;0<=k;k--)if(h=f[k],e.filters[h]===a){if(e.filters.splice(h,1),0>e.filters.indexOf(a)){var g=a.subscriptions.indexOf(e);0<=g&&a.subscriptions.splice(g,1)}b.triggerListeners("filter.removed",a,e,h)}}};return b.addListener(a),{setExcludeFilters:function(a){a=a.trim();for(var b,d=a.split("\n"),e=[],f=0;f<d.length;f++)if(b=d[f],b=b.trim(),0<b.length){var g=parseFilter(b);g.filter&&(e.push(g.filter),c(g.filter))}0<e.length?ext.storage.set("exclude_filters",e.join("\n")):ext.storage.remove("exclude_filters")}}}();