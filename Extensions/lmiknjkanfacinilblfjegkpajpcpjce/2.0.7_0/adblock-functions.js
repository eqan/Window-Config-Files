'use strict';var VERBOSE_DEBUG=!1,SAFARI=!1,OPERA=-1<navigator.userAgent.indexOf("OPR"),logging=function(){window.log=function(){}};logging(!1);var loggingEnable=!1,onReady=function(a){"complete"===document.readyState?window.setTimeout(a,0):window.addEventListener("load",a,!1)};onReady(function(){"function"==typeof run_bandaids&&run_bandaids()});var translate=function(a,b){if(Array.isArray(b))for(var c=0;c<b.length;c++)"string"!=typeof b[c]&&(b[c]=b[c].toString());else b&&"string"!=typeof b&&(b=b.toString());return chrome.i18n.getMessage(a,b)},splitMessageWithReplacementText=function(a,b){var c=a.indexOf("[["),d=a.indexOf("]]");if(-1===c||-1===d)return log("replacement tag not found",b,a,c,d),{error:"no brackets found"};var e={anchorPrefixText:a.substring(0,c),anchorText:a.substring(c+2,d),anchorPostfixText:a.substring(d+2)};return e},localizePage=function(){$("[i18n]:not(.i18n-replaced, [i18n_replacement_el])").each(function(){$(this).text(translate($(this).attr("i18n")))}),$("[i18n_value]:not(.i18n-replaced)").each(function(){$(this).val(translate($(this).attr("i18n_value")))}),$("[i18n_title]:not(.i18n-replaced)").each(function(){$(this).attr("title",translate($(this).attr("i18n_title")))}),$("[i18n_placeholder]:not(.i18n-replaced)").each(function(){$(this).attr("placeholder",translate($(this).attr("i18n_placeholder")))}),$("[i18n_replacement_el]:not(.i18n-replaced)").each(function(){var a=$(this).attr("i18n");if(!a||"string"!=typeof a)return void $(this).addClass("i18n-replaced");if(!$(this).get(0).firstChild)return void log("returning, no first child found",$(this).attr("i18n"));if(!$(this).get(0).lastChild)return void log("returning, no last child found",$(this).attr("i18n"));var b="#"+$(this).attr("i18n_replacement_el");if(0===$(b).length)return void log("returning, no child element found",$(this).attr("i18n"),b);var c=chrome.i18n.getMessage(a)||"",d=splitMessageWithReplacementText(c,a);$(this).get(0).firstChild.nodeValue=d.anchorPrefixText,$(this).get(0).lastChild.nodeValue=d.anchorPostfixText,"INPUT"===$(b).get(0).tagName?$("#"+$(this).attr("i18n_replacement_el")).prop("value",d.anchorText):$("#"+$(this).attr("i18n_replacement_el")).text(d.anchorText),$(this).addClass("i18n-replaced")});var a=determineUserLanguage();("ar"===a||"he"===a)&&($("#main_nav").removeClass("right").addClass("left"),$(".adblock-logo").removeClass("left").addClass("right"),$(".closelegend").css("float","left"),document.documentElement.dir="rtl")},determineUserLanguage=function(){return"undefined"!=typeof navigator.language&&navigator.language?navigator.language.match(/^[a-z]+/i)[0]:null},parseUri=function(a){for(var b=/^(([^:]+(?::|$))(?:(?:\w+:)?\/\/)?(?:[^:@\/]*(?::[^:@\/]*)?@)?(([^:\/?#]*)(?::(\d*))?))((?:[^?#\/]*\/)*[^?#]*)(\?[^#]*)?(\#.*)?/.exec(a),c=["href","origin","protocol","host","hostname","port","pathname","search","hash"],d={},e=0;b&&e<c.length;e++)d[c[e]]=b[e]||"";return d};parseUri.parseSearch=function(a){a=a.substring(a.indexOf("?")+1).split("&");for(var b,c={},d=0;d<a.length;d++)if(b=a[d].split("="),b[0]&&!b[1]&&(b[1]=""),!c[decodeURIComponent(b[0])]&&"undefined"===decodeURIComponent(b[1]))continue;else c[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return c},parseUri.secondLevelDomainOnly=function(a,b){if(a){var c=a.match(/([^\.]+\.(?:co\.)?[^\.]+)\.?$/)||[a,a];return c[b?0:1].toLowerCase()}return a};var sessionstorage_get=function(a){var b=sessionStorage.getItem(a);if(null!=b)try{return JSON.parse(b)}catch(b){return void log("Couldn't parse json for "+a)}},sessionstorage_set=function(a,b){if(void 0===b)return void sessionStorage.removeItem(a);try{sessionStorage.setItem(a,JSON.stringify(b))}catch(a){"QUOTA_EXCEEDED_ERR"!=a.name||SAFARI||(alert(translate("storage_quota_exceeded")),openTab("options/index.html#ui-tabs-2"))}},BGcall=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);var c=a.shift(),d="function"==typeof a[a.length-1],e=d?a.pop():function(){};ext.backgroundPage.sendMessage({command:"call",fn:c,args:a},e)};