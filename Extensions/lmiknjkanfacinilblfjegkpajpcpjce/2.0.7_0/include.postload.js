"use strict";document instanceof HTMLDocument&&document.addEventListener("click",a=>{if(2==a.button)return;if(!1==a.isTrusted)return;let b=a.target;for(;!(b instanceof HTMLAnchorElement);)if(b=b.parentNode,!b)return;let c=null;if("http:"==b.protocol||"https:"==b.protocol);else{let a=/^abp:\/*subscribe\/*\?(.*)/i.exec(b.href);a&&(c=a[1])}if(!c)return;a.preventDefault(),a.stopPropagation();let d=null,e=null;for(let b of c.split("&")){let a=b.split("=",2);if(2==a.length&&/\S/.test(a[1]))switch(a[0]){case"title":d=decodeURIComponent(a[1]);break;case"location":e=decodeURIComponent(a[1]);}}e&&(d||(d=e),d=d.trim(),e=e.trim(),/^(https?|ftp):/.test(e)&&ext.backgroundPage.sendMessage({type:"subscriptions.add",title:d,url:e,confirm:!0}))},!0);