"use strict";let targetPageId=null;function onKeyDown(a){27==a.keyCode?(a.preventDefault(),closeDialog()):13==a.keyCode&&!a.shiftKey&&!a.ctrlKey&&(a.preventDefault(),addFilters())}function addFilters(){ext.backgroundPage.sendMessage({type:"filters.importRaw",text:document.getElementById("filters").value},a=>{0<a.length?alert(a.join("\n")):closeDialog(!0)})}function closeDialog(a){ext.backgroundPage.sendMessage({type:"forward",targetPageId,payload:{type:"composer.content.finished",remove:!("boolean"!=typeof a)&&a}}),window.close()}function init(){window.addEventListener("keydown",onKeyDown,!1),document.getElementById("addButton").addEventListener("click",addFilters),document.getElementById("cancelButton").addEventListener("click",closeDialog.bind(null,!1)),$("button").button(),document.getElementById("filters").focus(),ext.onMessage.addListener(a=>{switch(a.type){case"composer.dialog.init":targetPageId=a.sender,document.getElementById("filters").value=a.filters.join("\n");break;case"composer.dialog.close":window.close();}}),window.removeEventListener("load",init)}window.addEventListener("load",init,!1);