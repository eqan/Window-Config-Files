function Highlighter(){function a(a){var c,e=a.target,g=Date.now();if(!(25>g-d))return d=g,e===f[0]&&(f.hide(),e=document.elementFromPoint(a.clientX,a.clientY)),e===b?void f.show():e===document.body||"adblock-killme-overlay"===e.className?void f.hide():void(e=$(e),b=e[0],c=e.offset(),f.css({height:e.outerHeight(),width:e.outerWidth(),left:c.left,top:c.top}),f.show())}var b=null,c=!1,d=Date.now(),f=$("<div class='adblock-highlight-node'></div>");f.appendTo("body"),this.getCurrentNode=function(a){return a===f[0]?b:a},this.enable=function(){f&&!c&&$("body").bind("mousemove",a),c=!0},this.disable=function(){f&&c&&(f.hide(),$("body").unbind("mousemove",a)),c=!1},this.destroy=function(){this.disable(),f&&(f.remove(),f=null)}}function ClickWatcher(){this._callbacks={cancel:[],click:[]},this._clicked_element=null,this._highlighter=new Highlighter}ClickWatcher.prototype.cancel=function(a){this._callbacks.cancel.push(a)},ClickWatcher.prototype.click=function(a){this._callbacks.click.push(a)},ClickWatcher.prototype._fire=function(a,b){for(var c=this._callbacks[a],d=0;d<c.length;d++)c[d](b)},ClickWatcher.prototype.show=function(){var a=this,b=$("<div style='white-space: pre-wrap;'></div>").append(translate("findingads")).dialog({dialogClass:"adblock-blacklist-dialog",position:[50,50],height:120,minHeight:120,title:translate("blockanadtitle")});changeTextDirection($("body .adblock-blacklist-dialog")),window.setTimeout(function(){a._ui=a._build_ui(),b.dialog("close"),b.remove(),a._ui.dialog("open"),a._highlighter.enable()},10)},ClickWatcher.prototype.close=function(){this._callbacks.cancel=[],this._ui&&this._ui.dialog("close")},ClickWatcher.prototype._onClose=function(){null==this._clicked_element?this._fire("cancel"):this._fire("click",this._clicked_element),this._highlighter.destroy()},ClickWatcher.prototype._build_ui=function(){function a(){return b(this)}function b(a){return c._clicked_element=c._highlighter.getCurrentNode(a),c._ui.dialog("close"),!1}var c=this;$("body").on("click",".adblock-killme-overlay, .adblock-highlight-node",a),$("object,embed,iframe,[onclick]:empty").each(function(a,c){if(!(c.style&&"none"===c.style.display)){var d=new Overlay({dom_element:c,click_handler:b});d.display()}});var d={};d[translate("buttoncancel")]=function(){$(".adblock-ui-stylesheet").remove(),e.dialog("close")};var e=$("<div></div>").append(translate("clickthead")).append("<br/><br/>").dialog({dialogClass:"adblock-blacklist-dialog",position:[50,50],width:400,minHeight:125,autoOpen:!1,title:translate("blockanadtitle"),buttons:d,close:function(){$("body").off("click",".adblock-killme-overlay, .adblock-highlight-node",a),Overlay.removeAll(),c._onClose(),e.remove()},drag:function(){c._highlighter.disable()}});return e.dialog("widget").css("position","fixed").bind("mouseenter",function(){c._highlighter.disable()}).bind("mouseleave",function(){c._highlighter.enable()}),changeTextDirection($("body .adblock-blacklist-dialog")),e};