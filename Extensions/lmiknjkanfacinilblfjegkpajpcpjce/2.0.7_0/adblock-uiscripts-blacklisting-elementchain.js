function ElementChain(a){this._stack=[],this._change_events=[],this._stack.push($(a))}ElementChain.prototype.current=function(){return this._stack[this._stack.length-1]},ElementChain.prototype.moveUp=function(){return!!(0<this.current().parent().length&&"BODY"!=this.current().parent()[0].nodeName)&&(this._stack.push(this.current().parent()),this.change(),!0)},ElementChain.prototype.moveDown=function(){return!!(1<this._stack.length)&&(this._stack.pop(),this.change(),!0)},ElementChain.prototype.moveTo=function(a){for(;this._stack.length>a+1&&!!this.moveDown(););for(;this._stack.length<a+1&&!!this.moveUp(););},ElementChain.prototype.change=function(a,b){if(b)this._change_events.push([a,b]);else for(var c,d=0;d<this._change_events.length;d++)c=this._change_events[d],c[1].call(c[0])};