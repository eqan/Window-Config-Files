/*! For license information please see 3728.js.LICENSE.txt */
"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[3728],{10161:t=>{var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||t,s),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,o,i,s){var a=r?r+t:t;if(!this._events[a])return!1;var c,u,p=this._events[a],h=arguments.length;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),h){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,e),!0;case 3:return p.fn.call(p.context,e,n),!0;case 4:return p.fn.call(p.context,e,n,o),!0;case 5:return p.fn.call(p.context,e,n,o,i),!0;case 6:return p.fn.call(p.context,e,n,o,i,s),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];p.fn.apply(p.context,c)}else{var l,f=p.length;for(u=0;u<f;u++)switch(p[u].once&&this.removeListener(t,p[u].fn,void 0,!0),h){case 1:p[u].fn.call(p[u].context);break;case 2:p[u].fn.call(p[u].context,e);break;case 3:p[u].fn.call(p[u].context,e,n);break;case 4:p[u].fn.call(p[u].context,e,n,o);break;default:if(!c)for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];p[u].fn.apply(p[u].context,c)}}return!0},a.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||s(this,i);else{for(var c=0,u=[],p=a.length;c<p;c++)(a[c].fn!==e||o&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},74410:(t,e,r)=>{r.r(e),r.d(e,{rrulestr:()=>i.S,Frequency:()=>s.D,Weekday:()=>a.O,RRule:()=>n.ZP,RRuleSet:()=>o.Z,default:()=>c});var n=r(11996),o=r(85554),i=r(39990),s=r(8868),a=r(8622);const c=n.ZP},85554:(t,e,r)=>{r.d(e,{Z:()=>h});var n=r(85597),o=r(11996),i=r(1559),s=r(28307),a=r(35627),c=r(39990),u=r(79023);function p(t){var e=this;return function(r){if(void 0!==r&&(e["_"+t]=r),void 0!==e["_"+t])return e["_"+t];for(var n=0;n<e._rrule.length;n++){var o=e._rrule[n].origOptions[t];if(o)return o}}}const h=function(t){function e(e){void 0===e&&(e=!1);var r=t.call(this,{},e)||this;return r.dtstart=p.apply(r,["dtstart"]),r.tzid=p.apply(r,["tzid"]),r._rrule=[],r._rdate=[],r._exrule=[],r._exdate=[],r}return(0,n.ZT)(e,t),e.prototype._iter=function(t){return(0,a.X)(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){l(t,this._rrule)},e.prototype.exrule=function(t){l(t,this._exrule)},e.prototype.rdate=function(t){f(t,this._rdate)},e.prototype.exdate=function(t){f(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map((function(t){return(0,c.S)(t.toString())}))},e.prototype.exrules=function(){return this._exrule.map((function(t){return(0,c.S)(t.toString())}))},e.prototype.rdates=function(){return this._rdate.map((function(t){return new Date(t.getTime())}))},e.prototype.exdates=function(){return this._exdate.map((function(t){return new Date(t.getTime())}))},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat((0,u.N)({dtstart:this._dtstart}))),this._rrule.forEach((function(e){t=t.concat(e.toString().split("\n"))})),this._exrule.forEach((function(e){t=t.concat(e.toString().split("\n").map((function(t){return t.replace(/^RRULE:/,"EXRULE:")})).filter((function(t){return!/^DTSTART/.test(t)})))})),this._rdate.length&&t.push(d("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(d("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join("\n")},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach((function(e){return t.rrule(e.clone())})),this._exrule.forEach((function(e){return t.exrule(e.clone())})),this._rdate.forEach((function(e){return t.rdate(new Date(e.getTime()))})),this._exdate.forEach((function(e){return t.exdate(new Date(e.getTime()))})),t},e}(o.ZP);function l(t,e){if(!(t instanceof o.ZP))throw new TypeError(String(t)+" is not RRule instance");(0,s.q9)(e.map(String),String(t))||e.push(t)}function f(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");(0,s.q9)(e.map(Number),Number(t))||(e.push(t),i.Z.sort(e))}function d(t,e,r){var n=!r||"UTC"===r.toUpperCase();return(n?t+":":t+";TZID="+r+":")+e.map((function(t){return i.Z.timeToUntilString(t.valueOf(),n)})).join(",")}},39990:(t,e,r)=>{r.d(e,{S:()=>p});var n=r(85597),o=r(11996),i=r(85554),s=r(1559),a=r(28307),c=r(35725),u={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function p(t,e){return void 0===e&&(e={}),function(t,e){var r=function(t,e){var r=[],n=[],o=[],i=[],s=(0,c.o)(t),u=s.dtstart,p=s.tzid;return function(t,e){if(void 0===e&&(e=!1),!(t=t&&t.trim()))throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var r=t.split("\n"),n=0;n<r.length;){var o=r[n]=r[n].replace(/\s+$/g,"");o?n>0&&" "===o[0]?(r[n-1]+=o.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}(t,e.unfold).forEach((function(t){if(t){var e=function(t){var e=function(t){if(-1===t.indexOf(":"))return{name:"RRULE",value:t};var e=(0,a.Vl)(t,":",1);return{name:e[0],value:e[1]}}(t),r=e.name,n=e.value,o=r.split(";");if(!o)throw new Error("empty property name");return{name:o[0].toUpperCase(),parms:o.slice(1),value:n}}(t),s=e.name,u=e.parms,h=e.value;switch(s.toUpperCase()){case"RRULE":if(u.length)throw new Error("unsupported RRULE parm: "+u.join(","));r.push((0,c.B)(t));break;case"RDATE":var f=/RDATE(?:;TZID=([^:=]+))?/i.exec(t),d=(f[0],f[1]);d&&!p&&(p=d),n=n.concat(l(h,u));break;case"EXRULE":if(u.length)throw new Error("unsupported EXRULE parm: "+u.join(","));o.push((0,c.B)(h));break;case"EXDATE":i=i.concat(l(h,u));break;case"DTSTART":break;default:throw new Error("unsupported property: "+s)}}})),{dtstart:u,tzid:p,rrulevals:r,rdatevals:n,exrulevals:o,exdatevals:i}}(t,e),n=r.rrulevals,s=r.rdatevals,u=r.exrulevals,p=r.exdatevals,f=r.dtstart,d=r.tzid,v=!1===e.cache;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||s.length||u.length||p.length){var m=new i.Z(v);return m.dtstart(f),m.tzid(d||void 0),n.forEach((function(t){m.rrule(new o.ZP(h(t,f,d),v))})),s.forEach((function(t){m.rdate(t)})),u.forEach((function(t){m.exrule(new o.ZP(h(t,f,d),v))})),p.forEach((function(t){m.exdate(t)})),e.compatible&&e.dtstart&&m.rdate(f),m}var g=n[0]||{};return new o.ZP(h(g,g.dtstart||e.dtstart||f,g.tzid||e.tzid||d),v)}(t,function(t){var e=[],r=Object.keys(t),o=Object.keys(u);if(r.forEach((function(t){(0,a.q9)(o,t)||e.push(t)})),e.length)throw new Error("Invalid options: "+e.join(", "));return(0,n.pi)((0,n.pi)({},u),t)}(e))}function h(t,e,r){return(0,n.pi)((0,n.pi)({},t),{dtstart:e,tzid:r})}function l(t,e){return function(t){t.forEach((function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)}))}(e),t.split(",").map((function(t){return s.Z.untilStringToDate(t)}))}},48849:(t,e,r)=>{r.r(e),r.d(e,{createAPIClient:()=>h});var n=r(72565),o=r.n(n),i=r(10161),s=r(91896),a=r(88767);function c(t,e={}){return o().runtime.sendMessage({call:t,data:e}).then((e=>e.error?(s.RetryableError.is(e.error)||console.error("RPC invoke of",t,"returned error:",e.value),Promise.reject(e.value)):e.value)).catch((e=>(s.RetryableError.is(e)||console.error("RPC invoke of",t,"failed:",e),Promise.reject(e))))}class u extends i.EventEmitter{constructor(){super(),this.lastConnected=0,this.port=null,this.handleDisconnect=()=>{this.pendingRpc.forEach(((t,e)=>{t(Promise.reject(s.BackendDisconnectedError.from({})))})),this.pendingRpc.clear(),this.port=null},this.handleMessage=(t,e)=>{switch(t.type){case"event":this.emit(t.name,...t.args||[]);break;case"response":{const e=this.pendingRpc.get(t.id);e&&(this.pendingRpc.delete(t.id),e(t.result));break}case"error":{const e=this.pendingRpc.get(t.id);e&&(this.pendingRpc.delete(t.id),e(Promise.reject(t.result)));break}}},this.rpc=async(t,e)=>{const r=await this.getPort(),n=(0,a.Z)();return new Promise(((o,i)=>{const a={id:n,name:t,type:"call",args:e};try{r.postMessage(a),this.pendingRpc.set(n,o)}catch(e){console.warn(`Error placing RPC request '${t}': ${(0,s.unknownToString)(e)}`),i(e)}}))},this.pendingRpc=new Map}async getPort(){if(!this.port){this.lastConnected=Date.now();const t=o().runtime.connect(void 0,{name:"bardeen.api"});t.onDisconnect.addListener(this.handleDisconnect),t.onMessage.addListener(this.handleMessage),this.port=t}return this.port}}class p{constructor(t){this.base=t}openSettings(t){const e=o().runtime.getURL("settings.html");window.open(t?e+`#/${t}`:e)}openErrors(){const t=o().runtime.getURL("settings.html");window.open(t+"#/errors")}openPlaybooks(t){const e=o().runtime.getURL("settings.html");window.open(e+"#/playbooks-catalog/?playbook="+t)}dedangle(t,e){("then"in t?t:t()).then((()=>{})).catch((t=>{console.error(t);const r=(0,s.isBardeenError)(t)?t:s.AssertionError.from({originalError:t});this.base.rpc("exceptionRegister",[{message:r.message,details:r,recoverable:!1,source:Object.assign({},e),date:Date.now()}])}))}authGetStatus(){return c("auth.rpc",{method:"authGetStatus",args:[]})}authFocusActive(){return c("auth.rpc",{method:"authFocusActive",args:[]})}promptSubmit(t){return c("auth.prompt.response",{method:"promptSubmit",args:t})}promptCancel(){return c("auth.prompt.cancel",{method:"promptCancel",args:[]})}authCancel(){return c("auth.rpc",{method:"authCancel",args:[]})}authContinue(){return c("auth.rpc",{method:"authContinue",args:[]})}authContinueOne(t){return c("auth.rpc",{method:"authContinueOne",args:[t]})}authDismissUI(){return c("auth.rpc",{method:"authDismissUI",args:[]})}}function h(){const t=new u,e=new p(t);return new Proxy(t,{get:(r,n)=>n in e?e[n]:n in t?t[n]:(...e)=>t.rpc(n,e)})}}}]);