"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[7691],{37691:(e,n,t)=>{t.r(n),t.d(n,{default:()=>u,paginate:()=>p,scrape:()=>d,scrapeTable:()=>h});var o=t(91896),a=t(85795),r=t(2784),c=t(28316),s=t(40831);const i=e=>{const[n,t]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement("div",{style:{position:"fixed",bottom:20,right:20,backgroundColor:"white",zIndex:2000000002}},r.createElement(a.BardeenButton,{size:"l",onClick:n=>{t(!0),e.onClick()}},n?"Stopping...":"Stop Scraping")))};var l=t(72650);const u=class extends o.UIModulePage{async mount(e){const n=e=>new Promise((n=>{this.controller.captureActiveTabRegion(e),this.controller.on("activeTabRegionResult",(async e=>{n(e)})),this.controller.on("captureActiveTabFailed",(async()=>{n("")}))})),t=new s.z;t.onError((e=>{this.controller.error(e)})),this.controller.on("scrape",(async(e,o)=>{d(e,this.controller,t,n,o)})),this.controller.on("isMounted",(async()=>{this.controller.isMounted(!0)})),this.controller.on("scrapeTable",(async e=>{h(e,this.controller,t)})),this.controller.on("paginate",(async(e,n)=>p(this.controller,t,e,n))),this.controller.on("cleanup",(async()=>t.cleanup())),this.controller.on("stopExecution",(async()=>{await this.controller.cancel()})),c.render(r.createElement(a.BardeenStyleProvider,null,r.createElement(i,{onClick:()=>{this.controller.cancel()}})),e),document.body.dataset.bardeenAction="scraping"}async unmount(e){delete document.body.dataset.bardeenAction,c.unmountComponentAtNode(e)}};async function p(e,n,t,o){!t||"click"!==t.type&&"scroll"!==t.type||await n.paginate(t,o),e.paginationComplete()}async function d(e,n,t,o,a){await(0,l.Kg)(5e3,500);const r=await t.execute(e,{captureActiveTabRegion:o},(async e=>{await n.saveProgress(e)}),a);await n.onScraperFinish(r)}async function h(e,n,t){const o=t.getTable(e.operations);await n.onScrapeTableFinish(o)}}}]);