(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[3847,3928],{46782:function(e,t,n){var o,r;void 0===(r="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){l(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,n,i){var l=a.URL||a.webkitURL,s=document.createElement("a");n=n||e.name||"download",s.download=n,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?r(s):o(s.href)?t(e,n,i):r(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(s.href)}),4e4),setTimeout((function(){r(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),n);else if(o(e))t(e,n,a);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){r(i)}))}}:function(e,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var l="application/octet-stream"===e.type,s=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||l&&s||i)&&"undefined"!=typeof FileReader){var p=new FileReader;p.onloadend=function(){var e=p.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},p.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,u=d.createObjectURL(e);r?r.location=u:location.href=u,r=null,setTimeout((function(){d.revokeObjectURL(u)}),4e4)}});a.saveAs=l.saveAs=l,e.exports=l})?o.apply(t,[]):o)||(e.exports=r)},74967:(e,t,n)=>{"use strict";n.d(t,{k:()=>r,Z:()=>i}),n(91896);const o={api:null},r=e=>{o.api=e},a=new Proxy(o,{get(e,t){if("_isMockFunction"===t)return!1;if(null===e.api)throw new Error("You must first call setAPI");return e.api[t]}});window.api=a;const i=a},96679:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var o=n(2784),r=n(85795),a=n(40069);const i=e=>{const{children:t}=e,[{isOpen:n,variant:i,message:l,description:s,autoHide:c},{closeSnackbar:p}]=(0,a.E0)();return o.createElement(o.Fragment,null,t,o.createElement(r.BardeenNotification,{open:n||!1,variant:i,message:l,description:s,onClose:p,autoHide:c}))}},13928:(e,t,n)=>{"use strict";n.d(t,{PopupWindow:()=>s.P,setAPI:()=>i.k});var o=n(2784),r=(n(28316),n(91896)),a=n(85795),i=n(74967),l=n(79692);(0,l.Z)({loginPrompt:{...a.center,height:"100%"},loginFrame:{width:"400px"}});var s=n(57346);const c=a.MetricsMap.boxModel.spacing;(0,l.Z)({form:{"& > div":{marginBottom:".5rem"}},logoHeader:{marginBottom:`${c.l}px`,display:"flex",alignItems:"center"},logoTitle:{fontSize:a.MetricsMap.typography.size.xl,lineHeight:`${a.MetricsMap.typography.lineHeight.m} px`,fontWeight:a.MetricsMap.typography.weight.normal,marginLeft:"10px"},promptsForm:{...a.centerVert,flexDirection:"column"},grid:{display:"flex"},card:{width:"600px",padding:"2rem !important",textAlign:"center","& > div > *":{padding:"1rem 0"}},formBtn:{"&:not(:last-child)":{marginRight:`${c.s}px`}}}),n(213),n(69378);const p=a.MetricsMap.boxModel.spacing;(0,l.Z)({sameHeight:{display:"flex",flexWrap:"wrap",flexFlow:"row wrap","& > *":{flexGrow:1,alignItems:"stretch","& > *":{height:"100%"}}},marginBottom:{"&.MuiTextField-root":{marginBottom:"16px"}},cardWrapper:{display:"flex",flexDirection:"column"},cardHeader:{display:"flex",alignItems:"center",borderBottom:`1px solid ${a.ColorMap.base[15]}`},cardTitle:{flex:1},cardContent:{display:"flex",marginTop:`${p.m}px`},cardAvatar:{marginRight:`${p.s}px`},grid:{display:"grid",columnGap:"1rem",rowGap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))"}});var d=n(11776),u=n(38402),m=n(3806),g=n(49378),f=n(82113),y=n(9520);const b=({filter:e})=>{const t=o.useRef(0),[n,r]=o.useState([]),l=async()=>r(await i.Z.exceptionList()),s=async e=>r(await i.Z.exceptionRecover(e.id)),c=async e=>r(await i.Z.exceptionDismiss(e.id));(0,a.useEffectOnce)((()=>(l(),t.current=window.setInterval(l,1e3),()=>{window.clearInterval(t.current)})));const p=n.filter((t=>!t.message.includes("charAt")&&(!e||!e.pluggableId||t.source.manifest&&t.source.manifest.id===e.pluggableId)));return o.createElement("div",null,o.createElement(d.Z,null,p.map((e=>o.createElement(w,{key:e.id,e,onDelete:c,onRetry:s})))),n.length>0?o.createElement(a.BardeenButton,{onClick:async()=>{await i.Z.exceptionDismissAll(),r([])}},"Clear Errors"):"No errors!")};function x(e){if(t=e,"[object Object]"!==Object.prototype.toString.call(t)&&!Array.isArray(e))return String(e);var t;try{return JSON.stringify(e,null,2)}catch(e){return"CIRCULAR JSON"}}const w=e=>{var t;const[n,r]=o.useState(!1),{e:i,onDelete:l,onRetry:s}=e,c=o.createElement(a.BardeenButton,{size:"s",type:"primary",key:"recover",onClick:()=>s(i)},"Recover"),p=[...i.recoverable?[c]:[],o.createElement(a.BardeenButton,{size:"s",key:"delete",onClick:()=>l(i),icon:{icon:"TrashBinOutline"}})];return o.createElement(u.Z,{button:!0,key:i.id,onClick:()=>r(!n)},o.createElement(m.Z,null,i.source.manifest?o.createElement(a.BardeenIcon,{icon:{url:i.source.manifest.icon}}):o.createElement(a.BardeenIcon,{color:a.ColorMap.strawberry.base,icon:{icon:"RadioExclamationBold"}})),o.createElement(g.Z,{primary:o.createElement("div",null,null===(t=i.source.manifest)||void 0===t?void 0:t.name," ",i.source.operation,o.createElement("div",null,i.message)),secondary:i.details?o.createElement(f.Z,{in:n,timeout:"auto",unmountOnExit:!0},o.createElement("pre",null,x(i.details))):null}),o.createElement(y.Z,null,p))};o.memo((()=>o.createElement("div",{style:{margin:"0 16px"}},o.createElement("div",{className:"settings-panel-background",style:{padding:24,minHeight:360}},o.createElement(a.BardeenPageHeader,{title:"Errors",subTitle:"Overview of system errors and warnings"}),o.createElement(b,null)))));var h=n(61454);const v=a.MetricsMap.boxModel.spacing,M=((0,h.createUseStyles)({badge:{display:"inline-flex",justifyContent:"center",alignItems:"center",height:"20px",minWidth:"20px",padding:`${v.base}px`,margin:`0 ${v.base}px`,borderRadius:"10px",backgroundColor:a.ColorMap.strawberry.base,boxShadow:"0 0 0 1px #fff",lineHeight:`${a.MetricsMap.typography.lineHeight.l}px`}}),a.MetricsMap.boxModel.spacing),k=((0,h.createUseStyles)({checkboxWrapper:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:`${M.m}px`}}),a.MetricsMap.boxModel.spacing);(0,h.createUseStyles)({missingContent:{"&.MuiTimelineItem-missingOppositeContent":{"&::before":{content:"none"}}},invocationWrapper:{width:"100%",padding:`${k.l}px`,"& .vbh-primary-fields":{maxWidth:"500px"},"& .b-collapse-details":{flexDirection:"column"},"& .b-collapse-summary":{padding:`${k.s}px 0`}},errorDot:{borderColor:a.ColorMap.strawberry.base},successDot:{borderColor:a.ColorMap.mint.base}}),(0,l.Z)({commandTag:{marginRight:a.MetricsMap.boxModel.spacing.base}}),(0,l.Z)({root:{"& > *":{borderBottom:"unset"}}});var C=n(40069),E=n(46782),T=n(57044),O=n(85519);const A=async e=>{if(e)return i.Z.playbookGetDependencies(e)},B=(o.memo((e=>{const{meta:t,onClick:n}=e,{color:l,description:s="",id:c=""}=t,[p,d]=(0,T.d)(),[u,m]=(0,O.i)({onAfterDelete:e.onChange}),[,{openSnackbar:g}]=(0,C.E0)(),f=o.useMemo((()=>[...B("user"===t.origin,{name:"Download",id:"pb_card_download",icon:{icon:"DownloadOutline"},onClick:()=>((e,t)=>{i.Z.dedangle((async()=>(0,E.saveAs)(new Blob([await i.Z.playbookExport(e)],{type:"application/json"}),`${t.toLocaleLowerCase().replace(/[^a-z0-9-_]/g,"-")}.bardeen`)))})(c,t.name)}),{name:"Share playbook",id:"pb_share_playbook",icon:{icon:"PaperplaneOutline"},onClick:()=>d(c)}]),[c,t,d]),y=n?()=>n(t):void 0,b=t.canDelete?()=>m(t):void 0,x=o.useCallback((()=>d(c)),[c,d]);return o.createElement(o.Fragment,null,o.createElement(a.PlaybookCard,{color:Array.isArray(l)?l:["melon","raspberry"],description:s,fadeIn:!0,getPBDependencies:A,id:c,integrationIcons:t.integrationIcons,menuItems:f,onClick:y,onDelete:b,onPinToggle:()=>{i.Z.dedangle(i.Z.playbookSetFavorite(c,!t.favorite).catch((e=>{g({message:`Could not toggle playbook favorite state: ${(0,r.unknownToString)(e)}`,variant:"error"})})).finally(e.onChange))},onClickPlaybookInfo:()=>i.Z.openPlaybooks(c),onSharePlaybook:x,pinned:t.favorite,running:e.running,title:t.name,tooltipOpen:e.tooltipOpen}),p,u)})),(e,t)=>e?[t]:[]),Z=a.MetricsMap.boxModel.spacing,$=((0,l.Z)({container:{marginBottom:"30px"},grid:{display:"flex",flexWrap:"wrap",gap:`${Z.s}px`},loadMoreButton:{width:"100%",marginTop:`${Z.l}px`,marginBottom:`${Z.l}px`,"&:hover":{color:a.ColorMap.bardeen[50]}},subtitle:{marginBottom:`${Z.l}px`},icon:{marginRight:`${Z.s}px`}}),a.MetricsMap.boxModel.spacing),S=((0,l.Z)({descriptionStyle:{color:a.ColorMap.base[60],marginTop:`${$.l}px`,marginBottom:`${$.l}px`},integrationIcons:{display:"flex",marginTop:$.s-3+"px",marginBottom:`${$.l}px`,gap:`${$.base}px`}}),a.MetricsMap.boxModel.spacing),R=((0,l.Z)({tokenLine:{display:"flex",padding:S.s-3+"px",marginBottom:`${S.s}px`},tokenArrow:{paddingTop:S.s-3+"px",marginRight:S.s-3+"px"},tokenCommandType:{marginRight:`${S.base}px`,"& $label":{marginRight:0}},tokenCommandArgs:{display:"flex",flexWrap:"wrap",maxWidth:"410px"},label:{margin:`${S.base}px`}}),a.MetricsMap.boxModel.spacing);(0,l.Z)({"@global":{body:{padding:0,margin:0},"#main":{minHeight:"100%"},".settings-panel-background":{backgroundColor:a.ColorMap.base.white}},layout:{display:"flex",flex:"auto",flexDirection:"column",minHeight:"100vh"},settingsLogo:{padding:18},settingsMenu:{marginTop:`${R.base}px`},item:{padding:`${R.m}px`,"&:not(:last-child)":{marginBottom:`${R.s}px`},color:a.ColorMap.base[30],cursor:"pointer","&:hover":{color:a.ColorMap.base.white}},activeItem:{backgroundColor:a.ColorMap.bardeen.base,color:a.ColorMap.base.white},settingsLayout:{transition:"all 0.2s"},settingsHeader:{height:"64px",background:a.ColorMap.base[90],position:"sticky",top:0,zIndex:100},marginBottom:{"&.MuiTextField-root":{marginBottom:"15px"}},btnWrapper:{display:"flex",alignItems:"center"},btn:{"&:not(:last-child)":{marginRight:`${R.s}px`}},pageHeaderTitleWrapper:{display:"flex",alignItems:"center"},pageHeaderTitle:{flex:1,marginLeft:`${R.s}px`},spinnerWrapper:{display:"flex",alignItems:"center",justifyContent:"center"}}),n(96679),(0,l.Z)({previewTableHeader:{padding:"10px",backgroundColor:"#eee",color:"#54575c",fontSize:"14px",fontWeight:600,textAlign:"center"}}),n.p,n.p},40069:(e,t,n)=>{"use strict";n.d(t,{j1:()=>p,nb:()=>d,mF:()=>u,E0:()=>m,ZP:()=>g});var o=n(2784),r=n(10188),a=(n(32287),n(82404),n(65248)),i=n(61981),l=n(76741),s=n(58511),c=n(63673);const p=(0,r.Z)(o,i.n,a.N),d=(0,r.Z)(o,l.M,l._),u=(0,r.Z)(o,s.Qx,s.r_),m=(0,r.Z)(o,c.A,c.N),g=p},213:(e,t,n)=>{"use strict";var o=n(51960),r=n(76118),a=n(74777),i=n(13980),l=n(18951),s=n(82151),c=n(71478),p=n(16901),d=n(23673),u=n(47491),m=n(10986),g=n(71214),f=n(98272),y=Object.keys(g),b=function(e){var t=e.source||e.children||"",n=e.parserOptions;if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var i=o(g,e.renderers),m=[[a,n]].concat(e.plugins||[]).reduce(x,r()),b=m.parse(t),w=o(e,{renderers:i,definitions:u(b)}),h=function(e){var t=[d,l()],n=e.disallowedTypes;e.allowedTypes&&(n=y.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var o=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(c.ofType(n,o)),e.allowNode&&t.push(c.ifNotMatch(e.allowNode,o));var r=!e.escapeHtml&&!e.skipHtml,a=(e.astPlugins||[]).some((function(e){return(Array.isArray(e)?e[0]:e).identity===f.HtmlParser}));return r&&!a&&t.push(s),e.astPlugins?t.concat(e.astPlugins):t}(e),v=m.runSync(b),M=h.reduce((function(e,t){return t(e,w)}),v);return p(M,w)};function x(e,t){return Array.isArray(t)?e.use.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(n=t)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()):e.use(t);var n}b.defaultProps={renderers:{},escapeHtml:!0,skipHtml:!1,sourcePos:!1,rawSourcePos:!1,transformLinkUri:m,astPlugins:[],plugins:[],parserOptions:{}},b.propTypes={className:i.string,source:i.string,children:i.string,sourcePos:i.bool,rawSourcePos:i.bool,escapeHtml:i.bool,skipHtml:i.bool,allowNode:i.func,allowedTypes:i.arrayOf(i.oneOf(y)),disallowedTypes:i.arrayOf(i.oneOf(y)),transformLinkUri:i.oneOfType([i.func,i.bool]),linkTarget:i.oneOfType([i.func,i.string]),transformImageUri:i.func,astPlugins:i.arrayOf(i.func),unwrapDisallowed:i.bool,renderers:i.object,plugins:i.array,parserOptions:i.object},b.types=y,b.renderers=g,b.uriTransformer=m,e.exports=b}}]);