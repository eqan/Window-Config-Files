"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[6069],{85519:(e,t,n)=>{n.d(t,{i:()=>u});var o=n(2784),a=n(91896),s=n(85795),i=n(62774),r=n(74967),l=n(40069);function u({onAfterDelete:e=(()=>{})}){const[t,n]=o.useState(null),[,{openSnackbar:u}]=(0,l.E0)(),c=o.useCallback((()=>n(null)),[n]),p=o.useCallback((()=>{t&&r.Z.dedangle(r.Z.playbookDelete(t.id).then(e).catch((e=>{u({message:`Could not delete playbook: ${(0,a.unknownToString)(e)}`,variant:"error"})})).finally((()=>{n(null)})))}),[t,u,e]);return[o.useMemo((()=>o.createElement(s.BardeenModal,{open:!!t,title:"Delete",primaryButton:"Ok",secondaryButton:"Cancel",footerVariant:"buttons",secondaryCallback:c,primaryCallback:p},o.createElement(i.Z,{mt:2},"Are you sure you want to delete ",o.createElement("strong",null,t?t.name:null),"? This action cannot be undone!"))),[c,p,t]),n]}},57044:(e,t,n)=>{n.d(t,{d:()=>l});var o=n(2784),a=n(74967),s=n(85795),i=n(91896),r=n(40069);function l(){const[,{openSnackbar:e}]=(0,r.E0)(),t=o.useRef(""),[n,l]=o.useState(!1),[u,c]=o.useState(!1),[p,d]=o.useState(!1),[g,m]=o.useState({editable:!1,instructions:"",shareId:"",shareUrl:"",created:!1}),h=o.useCallback((n=>{t.current=n,m({editable:!1,instructions:"",shareId:"",shareUrl:"Publishing playbook ...",created:!1}),d(!0),l(!0),c(!1),a.Z.playbookSharingGet(n).then((t=>{if(t)return m(t),c(t.editable),void d(!1);a.Z.playbookSharingUpdate(n,{}).then((e=>{m(e),c(e.editable),d(!1)})).catch((t=>{e({variant:"error",description:`Could not share this playbook: ${(0,i.unknownToString)(t)}`}),l(!1)}))})).catch((t=>{e({variant:"error",description:`Could not get the current sharing status of the playbook: ${(0,i.unknownToString)(t)}`}),l(!1)}))}),[e]),b=o.useCallback((()=>{l(!1)}),[]),k=o.useCallback((()=>{t.current&&(d(!0),a.Z.playbookSharingRevoke(t.current).then((()=>{d(!1),l(!1)})).catch((t=>{d(!1),e({variant:"error",description:`Could not unshare playbook: ${(0,i.unknownToString)(t)}`})})))}),[e]),f=o.useCallback((n=>{t.current&&(d(!0),a.Z.playbookSharingUpdate(t.current,n).then((e=>{m(e),d(!1),l(!1)})).catch((t=>{d(!1),e({variant:"error",description:`Could not update sharing details: ${(0,i.unknownToString)(t)}`})})))}),[e]);return[o.useMemo((()=>o.createElement(s.PlaybookShareModal,{editable:u,loading:p,onClose:b,onDelete:k,onCommit:f,open:n,sharingInfo:g})),[n,p,g,u,b,k,f]),h]}},57346:(e,t,n)=>{n.d(t,{P:()=>H});var o=n(2784),a=n(79692),s=n(74967),i=n(6277),r=n(69378),l=n.n(r),u=n(91896),c=n(85795);class p{constructor(e=100,t=200){this.blockTs=0,this.typingInterval=1/(t/60)*1e3,this.minInterval=e}cancel(){this.blockTs=0,delete this.scheduledFn,this.timer&&window.clearTimeout(this.timer)}fire(){return this.cancel(),this.scheduledFn?this.scheduledFn():Promise.resolve()}debounce(e,t=!1){if(this.blockTs||(this.blockTs=Date.now()),this.cancel(),this.isDelete&&!t)return this.isDelete=t,this.blockTs=0,void e();const n=Date.now()-this.blockTs,o=t?this.typingInterval:Math.max(0,Math.min(this.minInterval-n,this.typingInterval));this.isDelete=t,this.timer=window.setTimeout((()=>{this.blockTs=0,delete this.scheduledFn,e()}),o)}}var d=n(40069);const g=e=>{const{block:t,onNotebookChanged:n}=e,[a,i]=o.useState(e.defaultExpanded),[,{openSnackbar:r}]=(0,d.E0)();return o.createElement(c.VisualBlock,{block:t,bodyExpanded:a,onInteract:async e=>{try{const t=await s.Z.notebookVisualBlockInteract(e);return n?n(t):null}catch(e){r({variant:"error",description:(0,u.unknownToString)(e)})}},onToggleBody:()=>i(!a)})},m=c.MetricsMap.boxModel.spacing,h=(0,a.Z)({actionsSection:{marginRight:`${m.base}px`,...c.center,alignItems:"center",justifyContent:"center"},headerContainer:{padding:`${m.m-1}px ${m.m}px `,display:"flex",justifyContent:"space-between",backgroundColor:c.ColorMap.base.white},headerButtons:{borderRadius:`${m.m}px`,marginLeft:`${m.s}px`},iconButton:{marginRight:".5rem"},buttonWrapper:{...c.center,padding:`${m.m}px 0`,marginBottom:`${m.m}px`},marginRight:{marginRight:`${m.s}px`}}),b=e=>{const{blocks:t,onNotebookChanged:n,isLast:a,entry:s,quickActions:i,onCloseResultsScreen:r,onRepeat:l}=e,[u,p]=o.useState(10),d=h(),m=o.createElement(o.Fragment,null,s?o.createElement("div",{className:d.headerContainer},o.createElement(c.BardeenActionItemHeader,{icons:(null==s?void 0:s.pluginIcons)||[],isDark:!1,inputTokens:(null==s?void 0:s.userInputTokens)||[]}),o.createElement("div",{"data-testid":"vbg-actionsection",className:d.actionsSection},0===(null==i?void 0:i.length)?null:null==i?void 0:i.map(((e,t)=>o.createElement("div",{key:t},e))),o.createElement(c.BardeenButton,{"data-testid":"vbg-repeat",className:d.headerButtons,icon:{icon:"RepeatRoundOutline"},size:"s",rounded:!0,type:"neumorphOutline",onClick:e=>{e.preventDefault(),l&&l()}}),o.createElement(c.BardeenButton,{"data-testid":"vbg-close",icon:{icon:"CrossOutline"},size:"s",rounded:!0,type:"neumorphOutline",onClick:e=>{e.preventDefault(),r&&r()},className:d.headerButtons}))):null),b=t.slice(0,u).map(((e,s)=>o.createElement("div",{key:s},a?m:null,o.createElement(g,{"data-testid":"vbg-block",block:e,defaultExpanded:t.length<4,onNotebookChanged:n})))),k=t.some((e=>e.hasOwnProperty("messageContent")))?t.length-1:t.length;return u<t.length&&b.push(o.createElement("div",{key:"more",className:d.buttonWrapper},o.createElement(c.BardeenButton,{className:d.marginRight,type:"neumorphOutline",size:"m","data-testid":"vbg-showmore",onClick:e=>{e.preventDefault(),e.stopPropagation();const n=t.length,o=u+10;p(o>n?n:o)}},"Show more items"),k>0?o.createElement(c.BardeenButton,{type:"neumorphOutline",size:"m","data-testid":"vbg-showall",onClick:e=>{e.preventDefault(),e.stopPropagation();const n=t.length;p(n)}},"Show all ",k," entries"):null)),b},k=o.memo((e=>{const{entries:t,isDark:n,getQuickActions:a,onInputStateChanged:i,onNotebookChanged:r,closeResults:l}=e,u=e=>o.createElement(b,{blocks:e.blocks,onNotebookChanged:r});return o.createElement("div",null,t&&t.length>0?t.map(((e,p)=>{t.length;const d=a?a(e):[];return o.createElement(o.Fragment,{key:"notebookEntry-"+e.uuid},o.createElement(c.NotebookAction,{key:"action-"+e.uuid,isDark:n,appEditMode:!1,faint:!1,onRepeat:()=>{s.Z.notebookCommandRecall(e.uuid).then((e=>{i(e),l&&l()}))},onDelete:()=>s.Z.notebookCommandDelete(e.uuid).then(r),quickActions:d,defaultOpen:0===p,notebookEntry:{inputTokens:e.userInputTokens,body:o.createElement("div",null,u(e)),uuid:e.uuid,pluginIcons:e.pluginIcons}}))})):null)}),((e,t)=>{return e.changeIndicator==t.changeIndicator&&(((n=e.entries)===(o=t.entries)||null!=n&&null!=o&&n.length===o.length&&!n.some(((e,t)=>e.uuid!==o[t].uuid)))&&e.getQuickActions===t.getQuickActions);var n,o})),f=e=>{const{highlightAll:t,clipboardContext:n,inputTokens:a,onClear:s,onInputTextChange:i,onKeyDown:r,onPaste:l,onTokensChange:p,onTabChange:d,pbHeaderProps:g,...m}=e,[h,b]=o.useState(!1),k=o.useCallback((e=>{if(!h)return;e.preventDefault(),e.stopPropagation();const t=a.map((e=>e.type===u.CommandInput.TokenType.Rendered?e.label:e.value)).join(" "),o=a.map(((e,t)=>{const{itemColor:o,textColor:a}=(0,c.getTokenColors)(e.color),s=e.type===u.CommandInput.TokenType.Rendered?e.label:e.value;return`<span data-bardeen-context="${n}" data-token="${btoa(JSON.stringify(e))}" style="color: ${a}; background-color: ${o}; padding: 4px; border-radius: 4px;${t>0?" margin-left: 2px;":""}">${s}</span>`})).join(" "),s=globalThis.ClipboardItem;if(s&&navigator.clipboard.write){const e=`<span data-bardeen-version="2">${o}<span>&nbsp;</span></span>`,n=[new s({"text/plain":new Blob([t],{type:"text/plain"}),"text/html":new Blob([e],{type:"text/html"})})];navigator.clipboard.write(n)}else navigator.clipboard.writeText(t)}),[a,h,n]),f=o.useCallback((e=>{const t=e.clipboardData.getData("text/html");if(t){let o;if(null==(o=/data-bardeen-context="(.*?)"/g.exec(t)))return;{const t=o[1];if(t!=n)return console.warn(`Refusing to paste: Cannot paste data from context '${t}' to context '${n}'`),e.preventDefault(),void e.stopPropagation()}const a=[],s=/data-token="(.*?)"/g;let i="";for(;null!=(o=s.exec(t));){i=o[1];const e=JSON.parse(atob(i));a.push(e)}i.length>0&&(b(!1),p(a,"append"),e.preventDefault(),e.stopPropagation())}}),[n,p,b]),C=o.useCallback((e=>{if(h){if(["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Escape"].includes(e.key))return b(!1),e.preventDefault(),void e.stopPropagation();if("C"===e.key.toUpperCase()&&(e.ctrlKey||e.metaKey))return k(e),e.preventDefault(),void e.stopPropagation();if("X"===e.key.toUpperCase()&&(e.ctrlKey||e.metaKey))return k(e),p([],"delete"),e.preventDefault(),void e.stopPropagation();(function(e){return!e.ctrlKey&&!e.metaKey&&!e.altKey&&/[ a-z\d\[\\\]';=,\-.\/`]/i.test(e.key)})(e)&&(b(!1),p([],"delete"))}else if("A"===e.key.toUpperCase()&&(e.ctrlKey||e.metaKey)&&a.length)return b(!0),i("",{action:"input-change"}),e.preventDefault(),void e.stopPropagation();if("Backspace"===e.key){if(e.metaKey||h)return b(!1),p([],"delete"),e.preventDefault(),void e.stopPropagation();e.ctrlKey&&i("",{action:"input-change"})}"Tab"===e.key&&(d(!e.shiftKey),e.preventDefault(),e.stopPropagation()),r(e)}),[h,r,k,p,a.length,i,d]),v=o.useCallback((()=>{b(!1),s&&s()}),[s,b]),y=o.useCallback((e=>{f(e),l&&l(e)}),[l,f]);return o.useEffect((()=>{b(!1)}),[n,b]),o.createElement(c.BardeenCommandInput,{highlightAll:h||t,inputTokens:a,onClear:v,onInputTextChange:i,onKeyDown:C,onPaste:y,onTokensChange:p,pbHeaderProps:g,...m})},C=e=>{const{inputText:t,inputTokens:n,isExecutable:a,typeHint:s,onClear:i,onKeyDown:r,onMenuClose:c,onTokensChange:p,onInputTextChange:g,...m}=e,[{groups:h},{clearSuggestions:b}]=(0,d.nb)(),k=o.useRef(n),C=o.useRef(h),[T,E]=o.useState({}),[x,I]=o.useState(n),[M,Z]=o.useState(h),[A,R]=o.useState([]),[D,B]=o.useState([]),[P,O]=o.useState(""),N=o.useMemo((()=>A.find((e=>e.argument.name===P))),[P,A]),L=A.length>0,H=o.useCallback((()=>{R([]),B([]),O(""),E({}),I([])}),[]),F=o.useCallback((e=>{b(),O(e),b();const t=y(D,e,A);p(t,"append"),setTimeout((()=>{const t=T[e]||"";g(t,{action:"input-change"})}),0)}),[b,D,A,p,T,g]),$=o.useCallback(((e=!0)=>{if(!P||A.length<2)return;const t=A.findIndex((e=>e.argument.name===P));if(-1===t)return;const n=w(t+(e?1:-1),A.length);F(A[n].argument.name)}),[P,A,F]),K=o.useCallback(((e,t)=>{["set-value","input-change"].includes(t.action)&&("input-change"===t.action&&E(Object.assign(T,{[P]:e})),g(e,t))}),[g,T,P]);o.useEffect((()=>{const e=v(k.current),o=v(n);if(k.current=n,null==e&&null!=o){const e=function(e){var t,n;let o="";const a=[],s=[],i=[];if(!e.length)return{activeTab:o,currentTabTokens:a,commandArguments:s,rootTokens:i};const r=e.slice(),l=r.shift(),u=l.uiMeta;if(!u)return{activeTab:o,currentTabTokens:a,commandArguments:s,rootTokens:i};if("playbook"===u.type)u.arguments.forEach((e=>{s.push({argument:e,complete:!1,tokens:[]})})),o=null===(t=u.arguments[0])||void 0===t?void 0:t.name,i.push(l);else if(!u)return{activeTab:o,currentTabTokens:a,commandArguments:s,rootTokens:i};const c=(e,t)=>{const n=s.find((t=>t.argument.name===e));n&&(n.tokens=t)};let p=null,d=[];for(;r.length;){const e=r.shift();"playbook.argument"===(null===(n=e.uiMeta)||void 0===n?void 0:n.type)?(p&&d.length&&c(p.uiMeta.name,d),p=e,d=[]):p&&d.push(e)}p&&c(p.uiMeta.name,d);const g=s.find((e=>e.argument.name===o));return g&&a.push(...g.tokens),{activeTab:o,currentTabTokens:a,commandArguments:s,rootTokens:i}}(n);if(R(e.commandArguments),B(e.rootTokens),t.length>0){const n=(null==s?void 0:s.argName)||e.activeTab;O(n),E(Object.assign(T,{[n]:t}))}else O(e.activeTab);I(e.currentTabTokens)}else if(null==o&&null!=e)H();else if(L){const e=A.find((e=>e.argument.name===P));(null==e?void 0:e.tokens)&&I(e.tokens)}else L||I(n)}),[H,n,L,s,t,T,A,P]);const _=o.useCallback(((e,t)=>{if(L){const n=S(A,P,{tokens:e});R(n);const o=y(D,P,n);p(o,t),E(Object.assign(T,{[P]:""}))}else p(e,t)}),[P,A,L,p,T,D]),z=o.useCallback((e=>{const t=S(A,e,{tokens:[],complete:!1});R(t);const n=y(D,P,t);p(n,"delete")}),[A,D,P,p]),G=o.useCallback((()=>{H(),i&&i()}),[i,H]),V=o.useMemo((()=>{const e=v(n);if(!e)return;if(0===A.length)return;const{color:t,name:o}=e.uiMeta.playbookMeta,a=(0,u.getPlaybookColorPair)(t);return{activeTab:P,color:a,name:o,tabs:A,onTabChange:F,onArgumentDelete:z}}),[n,P,A,F,z]),U=o.useMemo((()=>{const e=v(n);if(!e)return"";const t=e.uiMeta;return"playbook"===(null==t?void 0:t.type)?`${t.playbookMeta.id}-${P}`:""}),[n,P]);return o.useEffect((()=>{const t=e=>{l()(e,C.current)||(C.current=e,Z(e))};if(L){let n=a;if(t(h.map((e=>(e.options.some((e=>0===e.nestingLevel))&&(n=!0),{icon:e.icon,label:e.label,options:e.options.filter((e=>0!==e.nestingLevel))}))).filter((e=>e.options.length>0))),e.isLoading)return;(null==N?void 0:N.tokens.length)||(n=!1),(null==N?void 0:N.complete)!=n&&R((e=>S(e,P,{complete:n})))}else t(h)}),[e.isLoading,P,N,a,L,C,h]),o.createElement(f,{clipboardContext:U,completeChoice:!a&&(null==N?void 0:N.complete)?"visible":"hidden",inputSuggestionGroups:M,inputText:t,inputTokens:x,isExecutable:a&&""===t,onClear:G,onComplete:$,onKeyDown:r,onInputTextChange:K,onMenuClose:c,onTokensChange:_,onTabChange:$,pbHeaderProps:V,...m})};function v(e){var t;return e&&e.length&&e[0].uiMeta&&"playbook"===(null===(t=e[0].uiMeta)||void 0===t?void 0:t.type)?e[0]:null}function y(e,t,n){const o=[];o.push(...e),n.forEach((e=>{e.argument.name!==t&&0!==e.tokens.length&&(o.push(...e.argument.prefixTokens),o.push(...e.tokens))}));const a=n.find((e=>e.argument.name===t));return o.push(...a.argument.prefixTokens),o.push(...a.tokens),o}const S=(e,t,n)=>e.map((e=>e.argument.name!==t?e:{...e,...n})),w=(e,t)=>(e%t+t)%t;class T extends o.Component{constructor(e){super(e),this.inputRef=o.createRef(),this.state={userInput:"",isOptionSelected:!1},this.handleStateChange=(e,t,n)=>{const{onInputStateChange:o,inputState:a}=this.props;o(Object.assign({},a,{tokens:e,userInput:t}),n)},this.handleInputChange=(e,t)=>{if(!this.props.typeHint&&"\n"===e)return;const{tokens:n}=this.props.inputState;this.setState({userInput:e}),"input-change"===t.action&&this.handleStateChange(n,e,"input")},this.handleTokensChange=(e,t)=>{this.handleStateChange(e,"","append"===t?"choice":"delete"),this.focus()},this.handleClear=e=>{this.setState({userInput:""}),this.handleStateChange([],"","delete"),null==e||e.preventDefault(),null==e||e.stopPropagation()},this.insertAtCursorPosition=e=>{const{inputState:t}=this.props,{userInput:n}=this.state,o=document.activeElement,a=o.selectionStart;this.setState({userInput:n.substr(0,a)+e+n.substr(a)},(()=>{this.handleStateChange(t.tokens,this.state.userInput,"input"),o.selectionStart=o.selectionEnd=a+1}))},this.handleKeyDown=e=>{const{onKeyDown:t}=this.props,{userInput:n}=this.state;if(n.length>0&&"Enter"===e.key&&e.shiftKey)return e.preventDefault(),e.stopPropagation(),void this.insertAtCursorPosition("\n");if("ArrowUp"===e.key){const{isSuggestionMenuVisible:t,onUpArrow:n}=this.props;n&&!t&&n()&&(e.preventDefault(),e.stopPropagation())}t&&t(e)},this.handleMenuOpen=()=>{this.props.onSuggestionMenuToggle(!0),this.props.isAppVisible&&this.focus()},this.handleMenuClose=()=>{this.state.isOptionSelected?this.setState({isOptionSelected:!1}):this.props.onSuggestionMenuToggle(!1)},this.handleOnFocus=()=>{const{onFocus:e}=this.props;e&&e()},this.handleOnBlur=()=>{const{onBlur:e}=this.props;e&&e()},this.handleSubmit=()=>{this.props.onSubmit(),this.props.onSuggestionMenuToggle(!1),this.setState({isOptionSelected:!1})}}focus(e=!1){setTimeout((()=>{var e;return null===(e=this.inputRef.current)||void 0===e?void 0:e.focus()}),100),e&&this.props.onSuggestionMenuToggle(!0)}UNSAFE_componentWillReceiveProps(e){const t=e.inputState.userInput;this.state.userInput!==t&&this.setState({userInput:t})}shouldComponentUpdate(e,t){return t.isOptionSelected!==this.state.isOptionSelected||t.userInput!==this.state.userInput||e.isLoading!==this.props.isLoading||e.isSuggestionMenuVisible!==this.props.isSuggestionMenuVisible||e.inputToolTip!==this.props.inputToolTip||e.inputState.userInput!==this.props.inputState.userInput||e.inputState.isExecutable!==this.props.inputState.isExecutable||e.commandInputType!==this.props.commandInputType||JSON.stringify(e.inputState.tokens)!==JSON.stringify(this.props.inputState.tokens)}render(){const{autoFocus:e,inputState:{tokens:t,isExecutable:n,typeHint:a},isLoading:s,isSuggestionMenuVisible:i,inputToolTip:r,commandInputType:l,collectTokens:u}=this.props,{userInput:c}=this.state;return o.createElement(C,{autoFocus:e,collectTokens:u,commandInputType:l,inputRef:this.inputRef,inputText:c,inputTokens:t||[],inputToolTip:r,isExecutable:n||!1,isLoading:s,isSuggestionMenuVisible:i,typeHint:a,onBlur:this.handleOnBlur,onClear:this.handleClear,onFocus:this.handleOnFocus,onInputTextChange:this.handleInputChange,onKeyDown:this.handleKeyDown,onMenuClose:this.handleMenuClose,onMenuOpen:this.handleMenuOpen,onSubmit:this.handleSubmit,onTokensChange:this.handleTokensChange})}}const E=o.memo((e=>{const{open:t,handleClose:n}=e,[a,i]=o.useState("notifications"),[{list:r},{dismissException:l,dismissAllExceptions:u,retryException:p,setNotifications:g}]=(0,d.ZP)((e=>e.notifications),(e=>e.notificationActions)),m=(0,c.useFullScreenContainerStyles)(),h=o.useCallback((e=>{a!==e&&i(e)}),[a]);return t?o.createElement("div",{className:m.wrapper},o.createElement(c.Header,{disabledClearAll:0===r.length,onClearAll:u,activeNav:a,handleNavChange:h,onClose:n}),o.createElement((()=>{switch(a){case"settings":return o.createElement(c.Settings,null);default:return o.createElement(c.Content,{list:r,onRetry:async({id:e})=>g(await p(e)),onDismiss:async({id:e})=>g(await l(e)),onSettingsRedirect:()=>s.Z.openSettings("errors")})}}),null)):null}));var x=n(58511);const I="ui:ignoredExecutionWarnings",M=e=>{const{open:t,playbookMeta:n,onConfirm:a,...i}=e,[r,l]=o.useState(!1),u=o.useRef(!1),p=o.useCallback(((e,t)=>{t?async function(e){const t=await Z();t.includes(e)||(t.push(e),await s.Z.accountSettingsSet(I,t))}(e.id).finally((()=>{a(e)})):a(e)}),[a]);return o.useEffect((()=>{t!==u.current&&(u.current=t,t?Z().then((e=>{e.includes((null==n?void 0:n.id)||"")?n&&a(n):l(!0)})).catch((()=>{l(!0)})):l(!1))}),[t,n,a]),o.createElement(c.PlaybookExecutionWarningModal,{open:r,onConfirm:p,playbookMeta:n,...i})};function Z(){return s.Z.accountSettingsGet(I)}const A=c.MetricsMap.boxModel.spacing,R=c.MetricsMap.boxModel.zIndex,D=(0,a.Z)((e=>({"@global":{".popup-save-prompt":{background:c.ColorMap.base.white,padding:A.l,borderBottom:"solid 1px #f1f3f4",marginBottom:"10px"},".bardeen-trigger-group":{marginTop:A.base}},appWindow:{background:c.ColorMap.base.white,height:"100%",width:"100%"},bottomActions:{display:"flex",background:c.ColorMap.base.white,justifyContent:"center",padding:`${e.spacing(3)}px 0`,borderTop:"1px solid rgba(0, 0, 0, 0.02)",boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.06)",backgroundClip:"padding-box","& > *:not(:first-child)":{marginLeft:".75rem"}},notebookUI:{...c.column,marginTop:"-25px",height:"calc(100% - 80px + 25px)"},pbHeaderOn:{margin:0,height:"100%"},editableCommandsContent:{flex:1,overflowY:"scroll"},notebookUIFlex:{display:"flex",alignItems:"center",justifyContent:"space-between"},welcomeCardBtn:{display:"inline-block",...(0,c.positionAbsolute)({top:"12px",right:"12px"}),zIndex:1},tabHeaderButton:{fontSize:c.MetricsMap.typography.size.base,lineHeight:c.MetricsMap.typography.lineHeight.l+"px",fontWeight:c.MetricsMap.typography.weight.normal,marginTop:-10,marginBottom:-10},tabHeaderFooter:{...c.centerVert},bardeenSelect:{padding:"0 16px",zIndex:R.l},h100:{height:"100%"}}))),B=["👨‍💻","👩‍💻"];var P;!function(e){e[e.Hidden=0]="Hidden",e[e.ToGreen=1]="ToGreen",e[e.ToGray=2]="ToGray"}(P||(P={}));const O={tokens:[],userInput:""},N=e=>{const t=o.useMemo((()=>new p),[]),[n,{getNotifications:a,setNotifications:r}]=(0,d.j1)((e=>e.notifications),(e=>e.notificationActions)),[,{setSuggestions:g,clearSuggestions:m}]=(0,d.nb)(),[{activeCommandsList:h,resultsList:f,isOpen:C,state:v},{addResult:y,setResults:S,setActiveCommands:w,removeCommand:I,setIsResultsOpen:Z,updateProgress:A,setResultsState:R}]=(0,d.mF)(),[,{openSnackbar:N,closeSnackbar:L}]=(0,d.E0)(),H=o.useRef(null),F=o.useRef(""),$=o.useRef(-1),K=o.useRef(!0),_=o.useRef(v),z=o.useRef([]),G=o.useRef(0),{appVisible:V,commandExecuted:U,withHeader:j,timeSaved:W}=e,[q]=o.useState(0),[J,Q]=o.useState(""),[Y,X]=o.useState(!1),[ee,te]=o.useState(!1),[ne,oe]=o.useState(!1),[ae,se]=o.useState(!1),[ie,re]=o.useState(P.Hidden),[le,ue]=o.useState("ready"),[ce,pe]=o.useState([]),[de,ge]=o.useState({tokens:[],userInput:""}),[me,he]=o.useState(null),[be,ke]=o.useState(void 0),[fe,Ce]=o.useState(null),[ve,ye]=o.useState([]),[Se,we]=o.useState(null),[Te,Ee]=o.useState(""),[xe,Ie]=o.useState(null),[Me,Ze]=o.useState((()=>()=>{})),[Ae,Re]=o.useState(null),[De,Be]=o.useState(),[Pe,Oe]=o.useState({email:"",profilePicture:"",userName:"",uuid:""}),[Ne,Le]=function(){const[e,t]=o.useState(!1),[n,a]=o.useState(),s=o.useRef(),i=o.useRef();return[o.useMemo((()=>({onCancel:()=>{i.current&&i.current()},onConfirm:()=>{s.current&&s.current()},playbookMeta:n,open:e})),[e,n]),o.useCallback((e=>e.warningMessage?new Promise((n=>{s.current=()=>{t(!1),n(!0)},i.current=()=>{t(!1),n(!1)},a(e),t(!0)})):Promise.resolve(!0)),[])]}(),[He,Fe]=o.useState(void 0),[$e,Ke]=o.useState(),_e=o.useRef(!1),ze=o.useRef(de),Ge=o.useRef(!1),Ve=o.useRef(!1);Ge.current=C,Ve.current=ae;const Ue=o.useMemo((()=>{if(V&&de.tokens[0]){const e=de.tokens[0];if(e.uiMeta&&"playbook"===e.uiMeta.type&&e.uiMeta.arguments)return Boolean(e.uiMeta.arguments.length)}return!1}),[V,de.tokens]),je=D(),We=!f.length&&!h.length,qe=(0,o.useCallback)(((e=!1)=>{var t;return null===(t=H.current)||void 0===t?void 0:t.focus(e)}),[]),Je=o.useCallback((()=>{if(!F.current)return;const e=F.current;return s.Z.progressiveDataCollect(F.current).then((t=>{if(e!==F.current)return;const n=t.data.filter((e=>{var t;return!(null===(t=e.children)||void 0===t?void 0:t.length)&&!e.label.startsWith("Value of '")}));if(t.completed)return g(n,"compose"),ue("ready"),F.current="",void X(!1);t.data.length>0&&(g(n,"compose"),ue("ready")),setTimeout((()=>window.requestAnimationFrame(Je)),25)})).catch((()=>{}))}),[g]),Qe=(0,o.useCallback)((()=>F.current?s.Z.progressiveDataAbort(F.current):Promise.resolve()),[]),Ye=(0,o.useCallback)((async()=>{await Qe(),X(!1),m()}),[Qe,m]),Xe=(0,o.useCallback)((e=>{Qe(),F.current=e,Je()}),[Qe,Je]),et=o.useCallback((()=>(Q(""),s.Z.notebookGetActive().then((e=>(he(e),s.Z.notebookCommandAutoComplete(ze.current).then((e=>Xe(e.suggestionsDataSession)))))).catch((e=>{N({variant:"error",description:`Could not update notebook: ${(0,u.unknownToString)(e)}`})})))),[N,Xe]),tt=o.useCallback((async()=>{const e=await a(),t=e=>e.map((e=>e.id)).sort();l()(t(e),t(z.current))||(z.current=e,r(e))}),[a,r]),nt=ce.length>0,ot=(0,o.useCallback)((()=>(tt(),Promise.all([s.Z.triggersList(),s.Z.getCommandExecutionProgress(),s.Z.authGetStatus()]).then((e=>{(0!==e[0].length||nt)&&pe(e[0]),Be(e[2]),-1===e[1]&&K.current&&(K.current=!1,et())})))),[tt,nt,et]),at=o.useCallback(((e,n)=>{const o=!e.tokens.length&&!e.userInput,a=ze.current;ze.current=e,ge(e);const i=()=>(X(!0),s.Z.notebookCommandAutoComplete({tokens:e.tokens,userInput:e.userInput}).then((e=>{Q(""),ke(e.typeHint);const t={...ze.current,isExecutable:e.isExecutable||!1,typeHint:e.typeHint};ze.current=t,ge(t),Xe(e.suggestionsDataSession)})).catch((e=>(N({variant:"error",description:`Could not provide suggestions: ${(0,u.unknownToString)(e)}`}),Ye()))));if("choice"===n)return t.cancel(),i();const r=e.userInput.length<a.userInput.length||e.tokens.length<a.tokens.length||"delete"===n;if(r&&o)return Ae&&Ae([]),t.cancel(),i();r&&""===a.userInput&&ke(void 0),t.debounce(i,r)}),[t,Xe,N,Ye,Ae]),st=o.useCallback((()=>{s.Z.notebookReset().then((async()=>{S([]),Q("")})).catch((e=>{Q((0,u.unknownToString)(e))}))}),[S]),it=o.useCallback((()=>{se(!1)}),[]),rt=o.useCallback((()=>{se(!0)}),[]),lt=o.useCallback((()=>{re(P.Hidden),Z(!0),R(x.wF.all),_.current=x.wF.all}),[Z,R]),ut=o.useCallback((()=>{_.current===x.wF.progress?re(P.ToGreen):re(P.ToGray),Z(!1),R(x.wF.all),_.current=x.wF.all,He&&Fe(void 0)}),[He,Z,R]),ct=o.useCallback((async e=>{S(e.entries.reverse());const t=await s.Z.notebookInspectContext(),n=e.entries.length>0?null==fe?void 0:fe.getMeta():void 0,o=c.PlaybookTransformState.fromInspection(t,Ce,n);Ce(o)}),[fe,S]),pt=o.useCallback(((e,t)=>o.createElement(b,{blocks:e.blocks,isLast:t,entry:e,onNotebookChanged:ct,onCloseResultsScreen:ut,onRepeat:()=>{ut(),s.Z.notebookCommandRecall(e.uuid).then((e=>{qe(!0),at(e),m()}))}})),[m,ut,qe,at,ct]),dt=o.useCallback((()=>(Qe(),ze.current=O,ge(O),ke(void 0),s.Z.notebookCommandAutoComplete(O).then((e=>{Xe(e.suggestionsDataSession),ke(e.typeHint)})).catch((e=>{N({variant:"error",description:`Could not auto-complete input: ${(0,u.unknownToString)(e)}`})})),s.Z.notebookCommandHandle(de).then((e=>{Q("");const t=n=>{n.uuid===e.uuid&&(s.Z.off("command_completed",t),s.Z.dedangle(s.Z.notebookGetActive().then((()=>{U(),Ae&&Ae(de.tokens)}))))};s.Z.on("command_completed",t)})).catch((e=>{Ae&&Ae(Promise.reject(e)),N({variant:"error",description:`Could not execute your request: ${(0,u.unknownToString)(e)}`})})))),[Qe,de,U,Ae,N,Xe]),gt=o.useCallback((e=>s.Z.notebookVisualBlockInteract(e)),[]),mt=o.useCallback((async e=>{const t=await s.Z.notebookCommandRecall(e),n=await s.Z.notebookCommandHandle(t);Q("");const o=e=>{e.uuid===n.uuid&&(s.Z.off("command_completed",o),s.Z.dedangle(s.Z.notebookGetActive().then((e=>S(e.entries.reverse())))))};s.Z.on("command_completed",o)}),[S]),ht=o.useCallback((()=>{const e=null==me?void 0:me.entries.length;if(e&&!de.userInput&&!de.tokens.length){const t=me.entries[e-1];return s.Z.notebookCommandRecall(t.uuid).then((e=>(m(),at(e)))).catch((e=>{N({variant:"error",description:`Could not recall last command: ${(0,u.unknownToString)(e)}`})})),!0}return!1}),[m,de.tokens.length,de.userInput,at,N,me]),bt=o.useMemo((()=>{const e=null!=De&&De.entries&&De.entries.length>0,t={onCancel:s.Z.authCancel,onContinue:s.Z.authContinue,onExecuteOne:s.Z.authContinueOne,onFocusActive:s.Z.authFocusActive,popupMode:!0,status:De,visible:ee};if(e)t.visible=!0;else if(ee&&Se){const e={headerText:Se.name,headerColor:(0,u.getPlaybookColorPair)(Se.color),headerIcon:{icon:"PlaybookBold"},icon:{icon:"TexturedMagnet"},title:"Connect applications",subtitle:"To run this playbook, please connect the following applications:",userData:{op:Te,meta:Se,lazy:xe},postAuthAction:"close",postAuthMessage:"Your selected playbook will be executed automatically."};t.status={auto:!1,entries:ve.map((e=>({icon:e.icon,active:!1,completed:!1,name:e.name,error:null}))),meta:e},t.onCancel=()=>{te(!1),Me(!1)},t.onContinue=()=>{s.Z.integrationsActivateMany(ve.map((e=>e.id)),e).then((e=>{Me(!e.aborted),te(!1)})).catch((()=>{te(!1),Me(!1)})).finally((()=>{s.Z.integrationsResetLastStatus(),Be(void 0)}))}}return o.createElement(c.ConnectApplicationsCardModal,{...t})}),[De,ee,Se,Te,xe,ve,Me]),kt=o.useMemo((()=>{if(!be)return"";if(be.argDescription)return"Specify "+be.argDescription[0].toLowerCase()+be.argDescription.substr(1);let e="Specify a";return/^[aeiou]/.exec(be.argName)&&(e+="n"),`${e} ${be.argName}`}),[be]),ft=o.useCallback((async(e,t)=>{try{const n=e.id,o=await s.Z.playbookGetDependencies(n);return!o.missingPlugins.length||(Ee(t),we(e),ye(o.missingPlugins),te(!0),new Promise((e=>{Ze((()=>e))})))}catch(e){return N({variant:"error",description:`Could not query playbook dependencies: ${(0,u.unknownToString)(e)}`}),!1}}),[N]),Ct=(0,o.useCallback)((async(e,t)=>{if(e.hasArguments){const{invokeTokens:t}=e;return qe(!0),m(),at({tokens:t,userInput:""}),new Promise((e=>{Re((()=>e))})).then((e=>{Re(null),JSON.stringify(e[0]),JSON.stringify(t[0])}))}if(!e.warningMessage||t||await Le(e))return s.Z.playbookRun(e.id).then((e=>{Q("");const t=n=>{n.uuid===e.uuid&&(s.Z.off("command_completed",t),s.Z.dedangle(s.Z.notebookGetActive().then((e=>{he(e)}))))};s.Z.on("command_completed",t)})).catch((e=>{Q((0,u.unknownToString)(e))}))}),[m,Le,qe,at]),vt=(0,o.useCallback)((()=>0===f.length?o.createElement(c.BardeenEmptyMessage,{title:"Compose a command",icons:B},"To learn how to run custom commands in Bardeen, follow this link to our Learning Center"," ",o.createElement("a",{href:"https://www.bardeen.ai/lessons/commands",target:"_blank"},"Guide to composing commands"),"."):o.createElement("div",{className:"bardeen-compose-group",style:{paddingRight:15,paddingLeft:15,paddingTop:0}},o.createElement(k,{changeIndicator:q,entries:f,onNotebookChanged:ct,onInputStateChanged:e=>{qe(!0),at(e),m()}}))),[f,q,ct,qe,at,m]),yt=o.useCallback(((e,t)=>o.createElement(k,{isDark:t,changeIndicator:q,entries:e,onNotebookChanged:ct,onInputStateChanged:e=>{qe(!0),at(e),m()},closeResults:ut})),[q,ct,ut,qe,at,m]),St=e=>{re(P.Hidden),Z(!0),R(x.wF.progress),_.current=x.wF.progress,w([e])},wt=o.useRef(Date.now()),Tt=e=>{const t=Date.now();t-wt.current<500||(A(e.uuid,e),wt.current=t)},Et=(e,t,n)=>{var o;if(I(e.uuid),!t||n)return xt();if(y(t),Fe(t),!e.aborting&&_.current===x.wF.progress){const e=(null===(o=null==t?void 0:t.blocks)||void 0===o?void 0:o[0])||{},n="status"in e&&"failure"===e.status||"status"in e&&"no-data"===e.status;R(n?x.wF.latest:x.wF.all),_.current=n?x.wF.latest:x.wF.all}},xt=async()=>{const e=await s.Z.notebookGetActive();S(e.entries.reverse())},It=o.useCallback((e=>{s.Z.dedangle(s.Z.progressCancel(e).then((()=>{I(e)})))}),[I]),Mt=o.useCallback(((e,t)=>ft(e,"pinned-invoke").then((n=>{if(n)return Ct(e,t)})).catch((e=>{N({variant:"error",description:`Error invoking: ${(0,u.unknownToString)(e)}`})}))),[N,Ct,ft]),Zt=o.useCallback((async e=>{var t,n;if(e.playbookMeta&&e.playbookMeta.warningMessage){if(!await Le(e.playbookMeta))return[];if(0===de.tokens.length&&0==e.playbookMeta.argdef.length)return Mt(e.playbookMeta,!0),[]}if(!e.lazy)return e.tokens;let o=Promise.resolve(!0);return((null===(t=e.lazy.requires)||void 0===t?void 0:t.plugins)||[]).length&&(Ie(e.lazy),o=ft(null===(n=e.lazy.requires)||void 0===n?void 0:n.playbook,"prefill-invoke")),o.then((t=>t?s.Z.notebookCommandEvaluateLazySuggestion(e.lazy,de).then((e=>e.tokens)):[])).catch((()=>[]))}),[de,Le,Mt,ft]),At=o.useCallback((e=>{"Enter"===e.key&&"ready"!==le&&e.preventDefault(),(String.fromCharCode(e.keyCode).match(/(\w|\s)/g)||"Backspace"===e.key)&&ue("suggestions-outdated")}),[ue,le]);(0,c.useEffectOnce)((()=>(s.Z.dedangle((async()=>{const e=await s.Z.progressListActiveCommands();e.length>0&&w(e)})()),s.Z.dedangle(xt()),s.Z.on("command_completed",Et),s.Z.on("command_progress",Tt),s.Z.on("command_started",St),()=>{s.Z.off("command_completed",Et),s.Z.off("command_progress",Tt),s.Z.off("command_started",St)})));const Rt=o.useCallback((()=>o.createElement(o.Fragment,null,vt(),o.createElement("div",{style:{marginTop:"16px"}}))),[vt]),Dt=o.useCallback((()=>{s.Z.dedangle(s.Z.appWindowHide().then((()=>{window.close()})))}),[]),Bt=()=>{N({variant:"warning",message:"Please check your internet connection.",autoHide:!1})};(0,c.useKeyboardHandler)((()=>{switch(!0){case Ge.current:return ut();case Ve.current:return it();case Boolean(ze.current.userInput)||ze.current.tokens.length>0:return at(Object.assign({},ze.current,{tokens:[],userInput:""}),"delete");default:return Dt()}}),["Escape"]),o.useEffect((()=>{et()}),[et]),(0,c.useEffectOnce)((()=>(ot(),window.clearInterval($.current),$.current=window.setInterval(ot,500),s.Z.systemBardeenAccountProfileGet().then(Oe),()=>{window.clearInterval($.current)}))),(0,o.useEffect)((()=>{V!==_e.current&&(_e.current=V,V?s.Z.dedangle((async()=>{await qe(),await s.Z.appWindowEvent("app_shown")})()):s.Z.appWindowEvent("app_hidden"))}),[V,qe]);const Pt=()=>{Fe(void 0)};o.useEffect((()=>{if(He)return G.current=window.setTimeout((()=>{Pt()}),1e4),()=>{G.current=0,clearTimeout(G.current)}}),[He]),(0,c.useEffectOnce)((()=>(window.navigator.onLine||Bt(),window.addEventListener("online",L),window.addEventListener("offline",Bt),()=>{window.removeEventListener("online",L),window.removeEventListener("offline",Bt)}))),(0,c.useEffectOnce)((()=>()=>Z(!1)));const Ot=o.useMemo((()=>j&&!Ue?o.createElement(c.PopupHeader,{icon:"./icons/bardeen-transparent.png",account:Pe,timeSaved:W,settingsButtonAction:s.Z.openSettings,resultsButtonAction:lt,notificationButtonAction:rt,disabledNotifications:!n.list.length,disabledResults:We,result:He,resultLoading:h.length>0,handleResultNotificationClose:Pt,handleResultScreenOpen:()=>{Z(!0),Pt()}}):null),[h,j,Ue,Pe,W,lt,rt,n.list.length,We,He,Z]);return o.createElement("div",{className:je.appWindow,ref:Ke},Ot,o.createElement("div",{className:(0,i.Z)(je.notebookUI,{[je.pbHeaderOn]:Ue})},o.createElement("div",{className:(0,i.Z)(je.bardeenSelect,{[je.h100]:ne})},o.createElement(T,{ref:H,collectTokens:Zt,commandInputType:"compose",inputState:de,inputToolTip:kt,isLoading:Y,isSuggestionMenuVisible:ne,onInputStateChange:at,onKeyDown:At,onSubmit:dt,onSuggestionMenuToggle:oe,onUpArrow:ht,typeHint:be,isAppVisible:V})),J?o.createElement(c.BardeenAlert,{severity:"error"},J):null,ne?null:o.createElement(o.Fragment,null,o.createElement("div",{className:je.notebookUIFlex},o.createElement("div",null,o.createElement(c.Title,{variant:"h4"},"Notebook")," "),o.createElement("div",null,o.createElement(c.BardeenIconButton,{tooltip:"Clear",TooltipProps:{placement:"bottom"},className:je.tabHeaderButton,type:"neumorphFlat",size:"l",icon:{icon:"TrashBinOutline"},onClick:st}))),Rt()),bt,o.createElement(c.BardeenScreenCollapseAnimation,{relativeTo:$e,targetSelector:"#btn-results",visible:ie!=P.Hidden,zIndex:999}),C?o.createElement(c.ResultsScreen,{activeAppTab:"actions",activeCommands:h,entries:f,state:v,renderEntry:pt,renderGroup:yt,handleRetry:mt,handleInteract:gt,onClear:st,onClose:ut,onCancel:It}):null,o.createElement(M,{...Ne}),o.createElement(E,{open:ae,handleClose:it}),o.createElement(c.BardeenBackdrop,{open:ne})))};var L=n(96679);const H=e=>{const{appVisible:t}=e,[n,a]=o.useState(0),[i,r]=o.useState(!0);o.useEffect((()=>{const e=setInterval((()=>s.Z.ping()),1e4);return()=>clearInterval(e)}),[]),(0,c.useKeyboardHandler)((e=>{e.preventDefault(),e.stopPropagation(),r(!1)}),["Alt+KeyO"]);const l=async()=>{a(await s.Z.getTimeSaved())};(0,c.useEffectOnce)((()=>{l()}));const p=F();return i?o.createElement(c.AppContainer,{api:s.Z}):o.createElement("div",{className:p.popupContainer,tabIndex:0,"data-bardeen-dismiss":!0},o.createElement("div",{className:p.popup,tabIndex:0},o.createElement(L._,null,o.createElement(N,{appVisible:t,commandExecuted:l,timeSaved:(0,u.timeSavedFormatted)(n),withHeader:!0}))))},F=(0,a.Z)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},popup:{borderRadius:e.spacing(3),display:"flex",height:640,width:640,position:"relative",overflow:"hidden",zIndex:1}})))},65248:(e,t,n)=>{n.d(t,{N:()=>a}),n(91896),n(32287),n(82404);var o=n(74967);const a={sessionActions:{setSession:(e,t)=>{const{state:n}=e;e.setState({...n,...t})}},notificationActions:{setNotifications:(e,t)=>{const{state:n}=e;e.setState({...n,notifications:{...n.notifications,list:t}})},getNotifications:()=>o.Z.exceptionList(),retryException:async(e,t)=>o.Z.exceptionRecover(t),dismissException:(e,t)=>o.Z.exceptionDismiss(t),dismissAllExceptions:()=>o.Z.exceptionDismissAll()}}},82404:(e,t,n)=>{n(91896)},58511:(e,t,n)=>{var o;n.d(t,{wF:()=>o,r_:()=>s,Qx:()=>a}),n(91896),function(e){e.progress="progress",e.latest="latest",e.all="all"}(o||(o={}));const a={isOpen:!1,state:o.all,resultsList:[],activeCommandsList:[]},s={setResults:(e,t)=>{0===t.length&&e.setState({...e.state,resultsList:[]}),e.setState({...e.state,resultsList:t})},addResult:(e,t)=>{e.setState({...e.state,resultsList:[t,...e.state.resultsList]})},setActiveCommands:(e,t)=>{e.setState({...e.state,activeCommandsList:t})},removeCommand:(e,t)=>{e.setState({...e.state,activeCommandsList:e.state.activeCommandsList.filter((e=>e.uuid!==t))})},setIsResultsOpen:(e,t)=>{e.setState({...e.state,isOpen:t})},updateProgress:(e,t,n)=>{e.setState({...e.state,activeCommandsList:e.state.activeCommandsList.map((e=>e.uuid===t?n:e))})},setResultsState:(e,t)=>{e.setState({...e.state,state:t})}}},63673:(e,t,n)=>{n.d(t,{N:()=>a,A:()=>o});const o={isOpen:!1,variant:"info",message:"",description:"",autoHide:!0},a={openSnackbar:(e,t)=>{var n;e.setState({isOpen:!0,variant:t.variant||"info",message:t.message||"",description:t.description||"",autoHide:null===(n=t.autoHide)||void 0===n||n})},closeSnackbar:e=>{e.setState({isOpen:!1,message:"",description:"",variant:"info",autoHide:!0})}}},61981:(e,t,n)=>{n.d(t,{n:()=>o}),n(32287);const o={session:null,playbooks:{list:[]},results:{list:[]},notifications:{list:[]}}},32287:(e,t,n)=>{n(91896)},76741:(e,t,n)=>{n.d(t,{_:()=>r,M:()=>o});const o={list:[],groups:[],commandInputType:"compose"};var a=n(91896);const s={"":{icon:null,label:"Default",weight:{compose:0,playbook:0,trigger:0}},exact:{icon:null,label:"Exact Match",weight:{compose:0,playbook:0,trigger:0}},notification:{icon:null,label:"Notification",weight:{compose:10,playbook:10,trigger:10}},operator:{icon:{icon:"CrossBold"},label:"Operator",weight:{compose:20,playbook:20,trigger:20}},playbook:{icon:{icon:"StarBold"},label:"Pinned Playbooks",weight:{compose:70,playbook:60,trigger:60}},"playbook-suggestion":{icon:{icon:"StarBold"},label:"Suggested Playbooks",weight:{compose:80,playbook:70,trigger:70}},value:{icon:{icon:"OverflowVerticalBold"},label:"Value",weight:{compose:50,playbook:50,trigger:50}},command:{icon:{icon:"PaperplaneBold"},label:"Command",weight:{compose:60,playbook:80,trigger:80}},"not-installed":{icon:{icon:"WebsiteOutline"},label:"Not installed",weight:{compose:100,playbook:100,trigger:100}},"arg-required":{icon:{icon:"RadioInfoBold"},label:"Required Arguments",weight:{compose:30,playbook:30,trigger:30}},"arg-optional":{icon:{icon:"RadioInfoBold"},label:"Optional Arguments",weight:{compose:40,playbook:40,trigger:40}}};function i(e,t){if(0===e.length)return[];const n=[],o={};return e.forEach((e=>{const t=e.group||a.SuggestionGroup.Default;let s=o[t];s||(s=o[t]=[],n.push(t)),s.push(e)})),n.sort(((e,n)=>s[e].weight[t]-s[n].weight[t])),n.map((e=>{const t=s[e],n=o[e].sort(((e,t)=>e.weight-t.weight));return{icon:t.icon,label:t.label,options:n}}))}const r={clearSuggestions:e=>{e.setState({...e.state,list:[],groups:[]})},setSuggestions:(e,t,n)=>{const o=t.map((e=>(e.__key=function(e){return e.deduplicationKey||`${e.label}:${e.description}`}(e),e)));return e.setState({...e.state,list:o,groups:i(o,n)})}}}}]);