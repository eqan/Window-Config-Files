"use strict";(self.webpackChunkbardeen_browser_extension=self.webpackChunkbardeen_browser_extension||[]).push([[2384],{42384:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var s=n(85795),o=n(91896),r=n(2784),a=n(28316);const d=(0,n(79692).Z)((e=>({windowStyle:{position:"fixed",zIndex:2147483e3,left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.45)"}}))),i=class extends o.UIModulePage{constructor(){super(...arguments),this.eventsCaptured=!1,this.setLifecycleVisible=e=>{},this.captureHandler=e=>{e.target instanceof HTMLElement&&e.target===o.UIGlobals.documentHost||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault())},this.bubbleHandler=e=>{e.stopPropagation()}}captureUserEvents(){this.eventsCaptured||(this.eventsCaptured=!0,window.addEventListener("keydown",this.captureHandler,!0),window.addEventListener("keypress",this.captureHandler,!0),window.addEventListener("keyup",this.captureHandler,!0),window.addEventListener("mousedown",this.captureHandler,!0),window.addEventListener("mousemove",this.captureHandler,!0),window.addEventListener("mouseup",this.captureHandler,!0),window.addEventListener("paste",this.captureHandler,!0),o.UIGlobals.documentRoot.addEventListener("keydown",this.bubbleHandler),o.UIGlobals.documentRoot.addEventListener("keypress",this.bubbleHandler),o.UIGlobals.documentRoot.addEventListener("keyup",this.bubbleHandler),o.UIGlobals.documentRoot.addEventListener("mousedown",this.bubbleHandler),o.UIGlobals.documentRoot.addEventListener("mousemove",this.bubbleHandler),o.UIGlobals.documentRoot.addEventListener("mouseup",this.bubbleHandler),o.UIGlobals.documentRoot.addEventListener("paste",this.bubbleHandler))}restoreUserEvents(){this.eventsCaptured&&(this.eventsCaptured=!1,window.removeEventListener("keydown",this.captureHandler,!0),window.removeEventListener("keypress",this.captureHandler,!0),window.removeEventListener("keyup",this.captureHandler,!0),window.removeEventListener("mousedown",this.captureHandler,!0),window.removeEventListener("mousemove",this.captureHandler,!0),window.removeEventListener("mouseup",this.captureHandler,!0),window.removeEventListener("paste",this.captureHandler,!0),o.UIGlobals.documentRoot.removeEventListener("keydown",this.bubbleHandler),o.UIGlobals.documentRoot.removeEventListener("keypress",this.bubbleHandler),o.UIGlobals.documentRoot.removeEventListener("keyup",this.bubbleHandler),o.UIGlobals.documentRoot.removeEventListener("mousedown",this.bubbleHandler),o.UIGlobals.documentRoot.removeEventListener("mousemove",this.bubbleHandler),o.UIGlobals.documentRoot.removeEventListener("mouseup",this.bubbleHandler),o.UIGlobals.documentRoot.removeEventListener("paste",this.bubbleHandler))}async mount(e){a.render(r.createElement(s.BardeenStyleProvider,null,r.createElement((()=>{const e=d(),[t,s]=r.useState(null),[o,a]=r.useState(!0),[i,l]=r.useState(!0);this.setLifecycleVisible=l;const u=o&&i;r.useEffect((()=>{this.controller.on("show",(async()=>a(!0))),this.controller.on("hide",(async()=>a(!1))),Promise.all([n.e(5156),n.e(6069),n.e(3847)]).then(n.bind(n,13928)).then((e=>{const{setAPI:t,PopupWindow:n}=e;t(this.api),s({component:n})})).catch((e=>{console.error("Could not load bardeen UI:",e)}))}),[]),r.useEffect((()=>(this.captureUserEvents(),()=>this.restoreUserEvents())),[]);const b=r.useCallback((e=>{e.target.dataset.bardeenDismiss&&this.controller.hideByUserRequest()}),[]);return r.createElement("div",{className:e.windowStyle,onMouseDown:b,"data-bardeen-dismiss":!0,id:"bardeen-popup"},t?(()=>{const e=t.component;return u?r.createElement(e,{appVisible:u}):null})():null)}),null)),e)}async unmount(e){a.unmountComponentAtNode(e)}async show(){this.setLifecycleVisible(!0),this.captureUserEvents()}async hide(){this.setLifecycleVisible(!1),this.restoreUserEvents()}}}}]);